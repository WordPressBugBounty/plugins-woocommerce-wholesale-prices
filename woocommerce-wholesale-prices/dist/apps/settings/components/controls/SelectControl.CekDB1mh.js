import{d as q,ar as F,bm as K,A as f,bn as u,bo as y,bp as b,h as E,a9 as i,bq as h,bu as w,aa as k,by as A,br as I}from"../../../../common/preload-helper.MbJrn6NK.js";import{r as P,p as C}from"../../index.tLNRCOMK.js";import{u as $}from"../../../../common/settings-store.Cbib97lz.js";/* empty css                                                                                      */import"../../../../common/DnDDataTableControl.vue_vue_type_style_index_0_scoped_0b913e4f_lang.eX2WFSeF.js";/* empty css                                                                                                 */import{_ as z}from"../../../../common/LabelControl.vue_vue_type_script_setup_true_lang.i-BAwYcC.js";/* empty css                                                                                        */import{j as M,S as D}from"../../../../common/index.v1Yeogkc.js";import"../../../../common/index.CWcnEAWt.js";import"../../../../common/motion.BZoznnMR.js";import"../../../../common/KeyCode.D63Tfrq7.js";import"../../../../common/SearchOutlined.U3k4CZZU.js";import"../../../../common/pickAttrs.XR8iodhj.js";import"../../../../common/slide.NKZUR-XG.js";import"../../../../common/index.DdAGYCH2.js";import"../../../../common/isMobile.DycClExL.js";import"../../../../common/useMergedState.DqLXzNX-.js";import"../../../../common/useState.C6kRbBbh.js";import"../../../../common/DownOutlined.C9z76A46.js";import"../../../../common/FormItemContext.TWH3AZ29.js";import"../../../../common/createContext.CBuT94fL.js";import"../../../../common/statusUtils.hi8hBXOR.js";import"../../../../common/compact-item.BAehxMOj.js";const G={class:"wwp-row-handle"},J={class:"wwp-left-content"},Q={class:"wwp-right-content"},W=["innerHTML"],X=["innerHTML"],Y=["innerHTML"],xe=q({__name:"SelectControl",props:{params:{type:Object,required:!0}},emits:["fieldData","selectedCondition","selectedDependent"],setup(B,{emit:N}){var L;const O=B,{params:R}=F(O),U=$(),{showPopup:x,componentUpgrade:j,selectedConditionKey:s,selectedConditionValue:r,editedRowKey:V,dynamicOptions:o}=K(U),e=R.value,l=f({}),v=f(e.default),n=f("");if(typeof v.value<"u"&&v.value!==null&&(n.value=v.value),typeof e.multiple<"u"&&e.multiple!==null&&e.multiple&&n.value.length===0&&(n.value=[]),typeof e.dependent_option<"u"&&e.dependent_option!==null?typeof o.value[e.dependent_option]<"u"&&o.value[e.dependent_option]!==null&&(l.value=e.options[o.value[e.dependent_option]],n.value=v.value):(typeof e.dependent<"u"&&e.dependent,l.value=e.options),typeof e.with_condition<"u"&&e.with_condition!==null)if(V.value===null)s.value!==""&&r.value!==""&&s.value===e.id&&(n.value=r.value);else if(s.value!==""&&r.value!=="")s.value===e.id&&(n.value=r.value);else{const t=n.value;n.value=t}const g=f((L=e.disabled)!=null?L:!1),c=N,d=f([]),T=f([]);if(n.value!==""&&!g.value){d.value[e.id]=n.value;let t=l.value[n.value];Array.isArray(n.value)&&(t=n.value.map(a=>l.value[a])),typeof e.label_id<"u"&&e.label_id!==null&&(d.value[e.label_id]=t),c("fieldData",d.value)}const H=t=>{if(typeof e.pro<"u"&&e.pro!==null)typeof e.pro_on_active<"u"&&e.pro_on_active!==null?e.pro_on_active&&n.value!==""&&(x.value=!0,n.value=""):(x.value=!0,n.value=v.value),j.value=e.pro;else{let a=l.value[t];Array.isArray(t)&&(a=t.map(_=>l.value[_])),d.value[e.id]=t,typeof e.label_id<"u"&&e.label_id!==null&&(d.value[e.label_id]=a),typeof e.column_dependent<"u"&&e.column_dependent!==null&&(d.value[e.column_dependent]=t,typeof e.column_dependent_text<"u"&&e.column_dependent_text!==null&&(d.value[e.column_dependent_text]=a)),c("fieldData",d.value),typeof e.with_condition<"u"&&e.with_condition!==null&&e.with_condition&&(s.value=e.id,r.value=t,T.value[e.id]=t,c("selectedCondition",T.value)),typeof e.dependent<"u"&&e.dependent!==null&&e.dependent&&(s.value=e.id,r.value=t,o.value[e.id]=t,c("selectedDependent",o)),n.value=t}};return typeof e.edit_options<"u"&&e.edit_options!==null&&(V.value===null?l.value=P(l.value,e.edit_options):typeof e.dependent_option<"u"&&e.dependent_option!==null?typeof o.value[e.dependent_option]<"u"&&o.value[e.dependent_option]!==null&&(l.value=e.options[o.value[e.dependent_option]]):(typeof e.dependent<"u"&&e.dependent,l.value=e.options)),(t,a)=>{var _,S;return u(),y("div",G,[b("div",J,[E(i(z),{params:i(e)},null,8,["params"])]),b("div",Q,[i(e).multiple?(u(),h(i(D),{key:0,ref:"select",value:n.value,"onUpdate:value":a[0]||(a[0]=p=>n.value=p),name:i(e).id,mode:"multiple",style:{"max-width":"320px",width:"100%"},disabled:g.value,onChange:H},{default:w(()=>[(u(!0),y(k,null,A(l.value,(p,m)=>(u(),h(i(M),{key:m,value:m},{default:w(()=>[b("span",{innerHTML:i(C)(p)},null,8,W)]),_:2},1032,["value"]))),128))]),_:1},8,["value","name","disabled"])):(u(),h(i(D),{key:1,ref:"select",value:n.value,"onUpdate:value":a[1]||(a[1]=p=>n.value=p),name:i(e).id,style:{"max-width":"320px",width:"100%"},disabled:g.value,onChange:H},{default:w(()=>[(u(!0),y(k,null,A(l.value,(p,m)=>(u(),h(i(M),{key:m,value:m},{default:w(()=>[b("span",{innerHTML:i(C)(p)},null,8,X)]),_:2},1032,["value"]))),128))]),_:1},8,["value","name","disabled"])),i(e).description!=="undefined"?(u(),y("p",{key:2,innerHTML:i(C)((S=(_=i(e))==null?void 0:_.description)!=null?S:"")},null,8,Y)):I("",!0)])])}}});export{xe as default};
